# 何切るドットコム
URLは[こちら](https://www.m-nanikiru.com/)

## サービス概要・サービスへの思い
「何切るドットコム」は、麻雀の「何切る問題」を投稿し、他のユーザーと共有することで、AIにはない多様な知見を得られる掲示板アプリです。「何切る」とは、「この手牌で何を切るべきだろう？」と悩むような問題のことを指します。このアプリは初心者から上級者まで、あらゆる麻雀プレイヤーが実践的な判断力を高め、自身の雀力向上を目指せる場を提供します。
私自身が麻雀プロとして活動する中でも、多くの何切るに遭遇します。そんな時、問題を投稿し、多数の麻雀愛好家やプロからの意見を得られる場所があればと考え、このサービスを開発しました。

## サービスの使い方
### アカウント登録
「新規登録」ボタンからアカウントの登録をします。
「メールアドレス」、「パスワード」を入力してください。
また、Googleアカウントでの新規登録も可能です。

### 「何切る」を投稿する
「何切る投稿」ボタンから「何切る」問題を投稿します。
「タイトル」「本文」を入力し、画像を添付、アンケート（任意）を入力したら投稿ボタンを押すことで投稿可能です。

### 多様な意見を得る
投稿された「何切る」に対し、多数のユーザーからコメントやアンケートによる回答が得られます。

## なぜ「何切るドットコム」なのか？
現在、麻雀の「何切る」はX（旧Twitter）などのSNSで共有されることが多いです。しかし、「何切るドットコム」は、SNSにはない麻雀専門の機能で、より深い学習と交流を可能にします。

### 便利なソート機能
「新着順」「閲覧数順」で問題を簡単に並び替え、人気の問題や最新の問題に素早くアクセスできます。

### 4択以上も可能なアンケート機能
リアルタイムで結果が反映されるアンケート機能は2択以上の選択肢に対応。より具体的な回答や傾向を把握できます。

### ブックマーク機能で復習を
気になった問題や後で見返したい問題を簡単に保存し、復習に役立てることができます。

### 細かい検索機能
タイトル・本文・ユーザー名での検索が可能です。

## 機能一覧
### ユーザー登録・ログイン機能
* 認証ライブラリ Sorcery を利用して、メールアドレスとパスワードによるセキュアなユーザー認証を実現しています。
* OmniAuth を組み合わせることで、Googleアカウントを利用したソーシャルログインにも対応しています。
* パスワードリセット機能も実装しており、PasswordMailer を通じてリセット手順をユーザーに通知します。

### 「何切る」一覧表示・投稿機能
* ユーザーは麻雀の「何切る」問題を投稿できます。投稿にはActive Storageを利用して画像を添付することが可能です。
* 投稿された問題は一覧で表示され、kaminari Gemを導入することでページネーションを実装し、大量のデータもスムーズに閲覧できます。

### コメント機能
* 各投稿に対して、ユーザーはコメントを投稿できます。
* comments_controller.rbでコメントの作成、更新、削除処理を行い、非同期処理は行わず、サーバーサイドで完結させています。

### アンケート機能
* 投稿者は accepts_nested_attributes_for を利用して、投稿と同時にアンケートを作成できます。
* ユーザーは各選択肢に投票でき、votes_controller.rb で投票処理が行われます。

### 検索機能
* boards_controller.rb 内で、Active Recordのクエリインターフェース（.where）を駆使した検索機能を実装しています。
* 入力されたキーワードをスペースで分割し、AND条件でタイトル、本文、投稿ユーザー名から絞り込み検索を行います。

### ソート機能
* boards_controller.rb の index アクション内で、params[:sort] の値に応じて条件分岐させ、orderメソッドを使って投稿を並び替えています。
* 「新着順 (created_at: :desc)」と「人気順 (views_count: :desc)」の並び替えに対応しています。

### ブックマーク機能
* Bookmark モデルを利用して、投稿に対するブックマーク機能を実装しています。
* current_user.bookmarks のように、ユーザーに紐づくブックマークを簡単に取得できます。

開発環境
* Webサーバー: Puma
* アプリケーション: Ruby on Rails (Ruby 3.2.2)
* データベース: PostgreSQL 14
* テスト:
  RSpec: テスティングフレームワーク
  Capybara & Selenium: E2Eテスト
* コード品質:
  RuboCop: 静的コード解析ツール (rubocop-rails-omakase を使用)
  Brakeman: セキュリティ脆弱性スキャナ

### 画面遷移図
機能フローについては、以下のFigmaリンクよりご覧いただけます。
画面遷移図URL
figma:https://www.figma.com/design/tZwU1U611cGRn0WbtVfSAF/%E4%BD%95%E5%88%87%E3%82%8B%E3%83%89%E3%83%83%E3%83%88%E3%82%B3%E3%83%A0?node-id=7108-15104&t=OEifWO3lGTNZT6yI-1
